<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generator Dokumen - Admin Guru Super App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Inter', sans-serif; }
        .doc-preview { background: white; padding: 15mm; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }
        .editable:hover { background-color: #fef3c7; outline: 1px dashed #f59e0b; }
        @media print {
            body { background: white; }
            .no-print { display: none !important; }
            .doc-preview { box-shadow: none; padding: 10mm; }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="flex flex-col lg:flex-row">
        <!-- Sidebar Form -->
        <aside class="no-print w-full lg:w-80 bg-slate-900 text-white p-4 lg:h-screen lg:overflow-y-auto lg:sticky lg:top-0">
            <div class="flex items-center justify-between mb-4">
                <a href="dashboard.html" class="flex items-center text-purple-300 hover:text-white">
                    <svg class="w-5 h-5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                    <span class="text-sm">Dashboard</span>
                </a>
                <span class="text-xl">üìÑ</span>
            </div>

            <h2 class="text-lg font-bold text-yellow-400 mb-4">Generator Dokumen</h2>

            <!-- File Upload -->
            <div class="mb-4">
                <label class="block text-xs font-semibold text-slate-400 uppercase mb-1">Upload CP/TP CSV</label>
                <input type="file" id="csvFile" accept=".csv" class="w-full text-sm file:mr-2 file:py-2 file:px-3 file:rounded file:border-0 file:bg-yellow-500 file:text-black file:font-semibold hover:file:bg-yellow-400">
                <p id="csvStatus" class="text-xs text-green-400 mt-1 hidden"></p>
            </div>

            <div class="mb-4">
                <label class="block text-xs font-semibold text-slate-400 uppercase mb-1">Atau Pilih Data CP</label>
                <select id="cpDataSelect" class="w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-sm">
                    <option value="">-- Pilih Data CP --</option>
                    <option value="cp-pai-sd">PAI - SD/MI</option>
                    <option value="cp-pai-smp">PAI - SMP/MTs</option>
                    <option value="cp-pai-sma">PAI - SMA/MA</option>
                    <option value="cp-matematika-sd">Matematika - SD</option>
                    <option value="cp-bahasa-indonesia-sd">Bahasa Indonesia - SD</option>
                </select>
            </div>

            <div class="border-t border-slate-700 my-4"></div>

            <!-- Form Fields -->
            <div class="space-y-3">
                <div>
                    <label class="block text-xs font-semibold text-slate-400 uppercase mb-1">Mata Pelajaran</label>
                    <input type="text" id="inputMapel" value="Pendidikan Agama Islam dan Budi Pekerti" class="w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-sm text-yellow-400 font-medium">
                </div>

                <div class="grid grid-cols-3 gap-2">
                    <div>
                        <label class="block text-xs font-semibold text-slate-400 uppercase mb-1">Kelas</label>
                        <select id="inputKelas" class="w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-sm">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6" selected>6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-xs font-semibold text-slate-400 uppercase mb-1">Rombel</label>
                        <input type="text" id="inputRombel" value="A" class="w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-sm text-center">
                    </div>
                    <div>
                        <label class="block text-xs font-semibold text-slate-400 uppercase mb-1">Semester</label>
                        <select id="inputSemester" class="w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-sm">
                            <option value="Ganjil" selected>Ganjil</option>
                            <option value="Genap">Genap</option>
                        </select>
                    </div>
                </div>

                <div>
                    <label class="block text-xs font-semibold text-slate-400 uppercase mb-1">Pilih Bab/Elemen</label>
                    <select id="inputElemen" class="w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-sm">
                        <option value="">-- Upload CSV Dulu --</option>
                    </select>
                </div>

                <div class="grid grid-cols-2 gap-2">
                    <div>
                        <label class="block text-xs font-semibold text-slate-400 uppercase mb-1">Tahun Awal</label>
                        <input type="number" id="inputTahun" value="2024" class="w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-sm">
                    </div>
                    <div>
                        <label class="block text-xs font-semibold text-slate-400 uppercase mb-1">JP/Pertemuan</label>
                        <input type="number" id="inputJp" value="4" class="w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-sm">
                    </div>
                </div>

                <div>
                    <label class="block text-xs font-semibold text-slate-400 uppercase mb-1">Hari Mengajar</label>
                    <select id="inputHari" class="w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-sm">
                        <option value="1">Senin</option>
                        <option value="2">Selasa</option>
                        <option value="3">Rabu</option>
                        <option value="4">Kamis</option>
                        <option value="5">Jumat</option>
                        <option value="6">Sabtu</option>
                    </select>
                </div>
            </div>

            <div class="border-t border-slate-700 my-4"></div>

            <!-- Sekolah Info -->
            <div class="space-y-3">
                <div>
                    <label class="block text-xs font-semibold text-slate-400 uppercase mb-1">Nama Sekolah</label>
                    <input type="text" id="inputSekolah" class="w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-sm">
                </div>
                <div>
                    <label class="block text-xs font-semibold text-slate-400 uppercase mb-1">Tempat, Tanggal</label>
                    <input type="text" id="inputTempatTgl" class="w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-sm">
                </div>
                <div class="grid grid-cols-2 gap-2">
                    <div>
                        <label class="block text-xs font-semibold text-slate-400 uppercase mb-1">Kepala Sekolah</label>
                        <input type="text" id="inputKepsek" class="w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-sm">
                    </div>
                    <div>
                        <label class="block text-xs font-semibold text-slate-400 uppercase mb-1">NIP Kepsek</label>
                        <input type="text" id="inputNipKepsek" class="w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-sm">
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-2">
                    <div>
                        <label class="block text-xs font-semibold text-slate-400 uppercase mb-1">Guru Mapel</label>
                        <input type="text" id="inputGuru" class="w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-sm">
                    </div>
                    <div>
                        <label class="block text-xs font-semibold text-slate-400 uppercase mb-1">NIP Guru</label>
                        <input type="text" id="inputNipGuru" class="w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-sm">
                    </div>
                </div>
            </div>

            <div class="border-t border-slate-700 my-4"></div>

            <!-- Document Selection -->
            <div class="mb-4">
                <label class="block text-xs font-semibold text-slate-400 uppercase mb-2">Pilih Dokumen</label>
                <div class="space-y-2">
                    <label class="flex items-center">
                        <input type="checkbox" id="checkAtp" checked class="mr-2 accent-yellow-500">
                        <span class="text-sm">ATP (Alur Tujuan Pembelajaran)</span>
                    </label>
                    <label class="flex items-center">
                        <input type="checkbox" id="checkProta" checked class="mr-2 accent-yellow-500">
                        <span class="text-sm">Prota (Program Tahunan)</span>
                    </label>
                    <label class="flex items-center premium-doc">
                        <input type="checkbox" id="checkPromes" checked class="mr-2 accent-yellow-500">
                        <span class="text-sm">Promes (Program Semester)</span>
                        <span class="ml-auto px-1.5 py-0.5 bg-yellow-500 text-black text-xs rounded">PRO</span>
                    </label>
                    <label class="flex items-center premium-doc">
                        <input type="checkbox" id="checkModul" checked class="mr-2 accent-yellow-500">
                        <span class="text-sm">Modul Ajar</span>
                        <span class="ml-auto px-1.5 py-0.5 bg-yellow-500 text-black text-xs rounded">PRO</span>
                    </label>
                    <label class="flex items-center premium-doc">
                        <input type="checkbox" id="checkKktp" checked class="mr-2 accent-yellow-500">
                        <span class="text-sm">KKTP</span>
                        <span class="ml-auto px-1.5 py-0.5 bg-yellow-500 text-black text-xs rounded">PRO</span>
                    </label>
                    <label class="flex items-center premium-doc">
                        <input type="checkbox" id="checkLkpd" class="mr-2 accent-yellow-500">
                        <span class="text-sm">LKPD</span>
                        <span class="ml-auto px-1.5 py-0.5 bg-yellow-500 text-black text-xs rounded">PRO</span>
                    </label>
                </div>
            </div>

            <!-- Generate Button -->
            <button onclick="generateDocuments()" class="w-full py-3 bg-green-500 text-white font-bold rounded-lg hover:bg-green-600 transition-colors mb-2">
                ‚ö° Generate Dokumen
            </button>
            <button onclick="window.print()" class="w-full py-3 bg-blue-500 text-white font-bold rounded-lg hover:bg-blue-600 transition-colors">
                üñ®Ô∏è Cetak / PDF
            </button>
        </aside>

        <!-- Main Content - Document Preview -->
        <main class="flex-1 p-4 lg:p-8">
            <div id="documentContainer" class="space-y-8 max-w-[297mm] mx-auto">
                
                <!-- ATP Document -->
                <div id="docAtp" class="doc-preview rounded-lg">
                    <div class="text-center font-bold text-base mb-4">
                        ALUR BAHAN AJAR CP, TP DAN ATP<br>
                        TAHUN PELAJARAN <span class="val-tahun">2024/2025</span>
                    </div>
                    
                    <div class="flex justify-between mb-4 text-sm">
                        <table>
                            <tr><td class="pr-4">NAMA SEKOLAH</td><td>: <span class="val-sekolah"></span></td></tr>
                            <tr><td>MATA PELAJARAN</td><td>: <span class="val-mapel"></span></td></tr>
                            <tr><td>FASE</td><td>: <span class="val-fase"></span></td></tr>
                        </table>
                        <table>
                            <tr><td class="pr-4">KELAS</td><td>: <span class="val-kelas"></span></td></tr>
                            <tr><td>SEMESTER</td><td>: <span class="val-semester"></span></td></tr>
                        </table>
                    </div>

                    <table class="w-full border-collapse text-xs">
                        <thead>
                            <tr class="bg-gray-100">
                                <th class="border border-black p-2 w-8">NO</th>
                                <th class="border border-black p-2">ELEMEN DAN CP</th>
                                <th class="border border-black p-2">TUJUAN PEMBELAJARAN</th>
                                <th class="border border-black p-2">ALUR TUJUAN PEMBELAJARAN</th>
                                <th class="border border-black p-2">DIMENSI PROFIL LULUSAN</th>
                                <th class="border border-black p-2">KOMPETENSI</th>
                                <th class="border border-black p-2">LINGKUP MATERI</th>
                                <th class="border border-black p-2">WAKTU</th>
                            </tr>
                        </thead>
                        <tbody id="bodyAtp">
                            <tr><td colspan="8" class="border border-black p-4 text-center text-gray-500">Upload file CSV untuk generate dokumen</td></tr>
                        </tbody>
                    </table>

                    <div class="flex justify-between mt-8 text-sm">
                        <div class="text-center">
                            <p>Mengetahui,</p>
                            <p>Kepala Sekolah</p>
                            <p class="mt-16 font-bold underline val-kepsek"></p>
                            <p>NIP. <span class="val-nipkepsek"></span></p>
                        </div>
                        <div class="text-center">
                            <p class="val-tempattgl"></p>
                            <p>Guru Mata Pelajaran</p>
                            <p class="mt-16 font-bold underline val-guru"></p>
                            <p>NIP. <span class="val-nipguru"></span></p>
                        </div>
                    </div>
                </div>

                <!-- Prota Document -->
                <div id="docProta" class="doc-preview rounded-lg">
                    <div class="text-center font-bold text-base mb-4">
                        PROGRAM TAHUNAN (PROTA)<br>
                        <span class="val-mapel uppercase"></span>
                    </div>
                    
                    <table class="mb-4 text-sm">
                        <tr><td class="pr-4">Satuan Pendidikan</td><td>: <span class="val-sekolah"></span></td></tr>
                        <tr><td>Mata Pelajaran</td><td>: <span class="val-mapel"></span></td></tr>
                        <tr><td>Fase / Kelas / Rombel</td><td>: <span class="val-fase"></span> / <span class="val-kelas"></span> / <span class="val-rombel"></span></td></tr>
                        <tr><td>Tahun Pelajaran</td><td>: <span class="val-tahun"></span></td></tr>
                    </table>

                    <table class="w-full border-collapse text-sm">
                        <thead>
                            <tr class="bg-gray-100">
                                <th class="border border-black p-2">Smt</th>
                                <th class="border border-black p-2">Bab / Elemen</th>
                                <th class="border border-black p-2">Tujuan Pembelajaran (Capaian)</th>
                                <th class="border border-black p-2 w-16">JP</th>
                            </tr>
                        </thead>
                        <tbody id="bodyProta">
                            <tr><td colspan="4" class="border border-black p-4 text-center text-gray-500">Upload file CSV untuk generate dokumen</td></tr>
                        </tbody>
                    </table>

                    <div class="flex justify-between mt-8 text-sm">
                        <div class="text-center">
                            <p>Mengetahui,</p>
                            <p>Kepala Sekolah</p>
                            <p class="mt-16 font-bold underline val-kepsek"></p>
                            <p>NIP. <span class="val-nipkepsek"></span></p>
                        </div>
                        <div class="text-center">
                            <p class="val-tempattgl"></p>
                            <p>Guru Mata Pelajaran</p>
                            <p class="mt-16 font-bold underline val-guru"></p>
                            <p>NIP. <span class="val-nipguru"></span></p>
                        </div>
                    </div>
                </div>

                <!-- Promes Document (Premium) -->
                <div id="docPromes" class="doc-preview rounded-lg premium-only">
                    <div class="text-center font-bold text-base mb-4">
                        PROGRAM SEMESTER (PROSEM)<br>
                        SEMESTER <span class="val-semester uppercase"></span>
                    </div>
                    
                    <table class="mb-4 text-sm w-1/2">
                        <tr><td class="pr-4">Satuan Pendidikan</td><td>: <span class="val-sekolah"></span></td></tr>
                        <tr><td>Mata Pelajaran</td><td>: <span class="val-mapel"></span></td></tr>
                        <tr><td>Fase / Kelas / Rombel</td><td>: <span class="val-fase"></span> / <span class="val-kelas"></span> / <span class="val-rombel"></span></td></tr>
                        <tr><td>Tahun Pelajaran</td><td>: <span class="val-tahun"></span></td></tr>
                    </table>

                    <div class="overflow-x-auto">
                        <table class="w-full border-collapse text-xs">
                            <thead id="headPromes"></thead>
                            <tbody id="bodyPromes">
                                <tr><td colspan="33" class="border border-black p-4 text-center text-gray-500">Upload file CSV untuk generate dokumen</td></tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="flex justify-between mt-8 text-sm">
                        <div class="text-center">
                            <p>Mengetahui,</p>
                            <p>Kepala Sekolah</p>
                            <p class="mt-16 font-bold underline val-kepsek"></p>
                            <p>NIP. <span class="val-nipkepsek"></span></p>
                        </div>
                        <div class="text-center">
                            <p class="val-tempattgl"></p>
                            <p>Guru Mata Pelajaran</p>
                            <p class="mt-16 font-bold underline val-guru"></p>
                            <p>NIP. <span class="val-nipguru"></span></p>
                        </div>
                    </div>
                </div>

                <!-- Modul Ajar (Premium) -->
                <div id="docModul" class="doc-preview rounded-lg premium-only">
                    <div class="text-center font-bold text-base mb-4">
                        MODUL AJAR KURIKULUM MERDEKA<br>
                        <span class="text-sm font-normal">Pendekatan Mindful, Meaningful, & Joyful Learning</span>
                    </div>

                    <div class="mb-4 p-3 bg-gray-50 rounded">
                        <h3 class="font-bold mb-2 text-purple-700">A. IDENTITAS MODUL</h3>
                        <table class="text-sm">
                            <tr><td class="pr-4">Nama Penyusun</td><td>: <span class="val-guru"></span> (<span class="val-sekolah"></span>)</td></tr>
                            <tr><td>Mata Pelajaran</td><td>: <span class="val-mapel"></span></td></tr>
                            <tr><td>Kelas / Fase / Smt / Rombel</td><td>: <span class="val-kelas"></span> / <span class="val-fase"></span> / <span class="val-semester"></span> / <span class="val-rombel"></span></td></tr>
                            <tr><td>Topik / Bab Materi</td><td>: <span class="val-elemen text-purple-700"></span></td></tr>
                            <tr><td>Alokasi Waktu</td><td>: <span class="val-jpbab"></span> JP</td></tr>
                        </table>
                    </div>

                    <div class="mb-4">
                        <h3 class="font-bold mb-2 text-purple-700 p-2 bg-gray-100 border-l-4 border-purple-500">B. DIMENSI PROFIL LULUSAN</h3>
                        <div id="modulP3" class="pl-4"></div>
                    </div>

                    <div class="mb-4">
                        <h3 class="font-bold mb-2 text-purple-700 p-2 bg-gray-100 border-l-4 border-purple-500">C. TUJUAN PEMBELAJARAN</h3>
                        <div id="modulTP" class="pl-4"></div>
                    </div>

                    <div class="mb-4">
                        <h3 class="font-bold mb-2 text-purple-700 p-2 bg-gray-100 border-l-4 border-purple-500">D. LANGKAH-LANGKAH PEMBELAJARAN</h3>
                        <div id="modulLangkah" class="pl-4"></div>
                    </div>

                    <div class="mb-4">
                        <h3 class="font-bold mb-2 text-purple-700 p-2 bg-gray-100 border-l-4 border-purple-500">E. ASESMEN PEMBELAJARAN</h3>
                        <ul class="pl-8 list-disc text-sm">
                            <li><strong>Diagnostik:</strong> Tanya jawab pemantik di awal pertemuan.</li>
                            <li><strong>Formatif:</strong> Observasi keterlibatan dan pengerjaan LKPD.</li>
                            <li><strong>Sumatif:</strong> Penugasan produk/proyek dan tes tertulis.</li>
                        </ul>
                    </div>

                    <div class="flex justify-between mt-8 text-sm">
                        <div class="text-center">
                            <p>Mengetahui,</p>
                            <p>Kepala Sekolah</p>
                            <p class="mt-16 font-bold underline val-kepsek"></p>
                            <p>NIP. <span class="val-nipkepsek"></span></p>
                        </div>
                        <div class="text-center">
                            <p class="val-tempattgl"></p>
                            <p>Guru Mata Pelajaran</p>
                            <p class="mt-16 font-bold underline val-guru"></p>
                            <p>NIP. <span class="val-nipguru"></span></p>
                        </div>
                    </div>
                </div>

                <!-- KKTP (Premium) -->
                <div id="docKktp" class="doc-preview rounded-lg premium-only">
                    <div class="text-center font-bold text-base mb-4">
                        KRITERIA KETERCAPAIAN TUJUAN PEMBELAJARAN (KKTP)
                    </div>

                    <table class="mb-4 text-sm">
                        <tr><td class="pr-4">Penyusun</td><td>: <span class="val-guru"></span></td></tr>
                        <tr><td>Satuan Pendidikan</td><td>: <span class="val-sekolah"></span></td></tr>
                        <tr><td>Tahun Pelajaran</td><td>: <span class="val-tahun"></span></td></tr>
                        <tr><td>Mata Pelajaran</td><td>: <span class="val-mapel"></span></td></tr>
                        <tr><td>Fase / Kelas / Rombel</td><td>: <span class="val-fase"></span> / <span class="val-kelas"></span> / <span class="val-rombel"></span></td></tr>
                    </table>

                    <table class="w-full border-collapse text-xs">
                        <thead>
                            <tr class="bg-gray-100">
                                <th class="border border-black p-2" rowspan="2">No</th>
                                <th class="border border-black p-2" rowspan="2">Smt</th>
                                <th class="border border-black p-2" rowspan="2">Bab</th>
                                <th class="border border-black p-2" rowspan="2">Capaian Pembelajaran (TP)</th>
                                <th class="border border-black p-2" colspan="3">Kriteria Penentuan KKTP</th>
                                <th class="border border-black p-2" rowspan="2">KKTP</th>
                            </tr>
                            <tr class="bg-gray-100">
                                <th class="border border-black p-2">Kompleksitas</th>
                                <th class="border border-black p-2">Daya Dukung</th>
                                <th class="border border-black p-2">Intaks Siswa</th>
                            </tr>
                        </thead>
                        <tbody id="bodyKktp">
                            <tr><td colspan="8" class="border border-black p-4 text-center text-gray-500">Upload file CSV untuk generate dokumen</td></tr>
                        </tbody>
                    </table>

                    <div class="flex justify-between mt-8 text-sm">
                        <div class="text-center">
                            <p>Mengetahui,</p>
                            <p>Kepala Sekolah</p>
                            <p class="mt-16 font-bold underline val-kepsek"></p>
                            <p>NIP. <span class="val-nipkepsek"></span></p>
                        </div>
                        <div class="text-center">
                            <p class="val-tempattgl"></p>
                            <p>Guru Mata Pelajaran</p>
                            <p class="mt-16 font-bold underline val-guru"></p>
                            <p>NIP. <span class="val-nipguru"></span></p>
                        </div>
                    </div>
                </div>

                <!-- LKPD (Premium) -->
                <div id="docLkpd" class="doc-preview rounded-lg premium-only hidden">
                    <div class="border-2 border-dashed border-purple-400 rounded-xl p-6">
                        <div class="text-center text-xl font-bold text-purple-700 mb-4">
                            ‚ú® LEMBAR KERJA PESERTA DIDIK (LKPD) ‚ú®<br>
                            <span class="text-sm text-gray-600 val-mapel"></span>
                        </div>

                        <div class="flex gap-4 mb-4 font-medium">
                            <div class="flex-1 border-b-2 border-gray-400 pb-1">Nama / Kelompok : </div>
                            <div class="flex-1 border-b-2 border-gray-400 pb-1">Kelas / Rombel : <span class="val-kelas"></span> / <span class="val-rombel"></span></div>
                            <div class="w-24 border-b-2 border-gray-400 pb-1">Nilai : </div>
                        </div>

                        <div class="mb-4">
                            <p class="font-bold text-purple-700 mb-2">A. Apa yang akan kita pelajari hari ini?</p>
                            <ul id="lkpdTP" class="pl-6 list-disc bg-white p-3 rounded border"></ul>
                        </div>

                        <div class="mb-4">
                            <p class="font-bold text-purple-700 mb-2">B. Petunjuk Kegiatan:</p>
                            <ol class="pl-6 list-decimal text-sm">
                                <li>Berdoa sebelum memulai kegiatan pembelajaran.</li>
                                <li>Baca setiap instruksi/pertanyaan dengan teliti dan diskusikan bersama teman kelompokmu.</li>
                                <li>Tulis jawabanmu dengan rapi. Bertanyalah kepada guru jika ada hal yang kurang jelas!</li>
                            </ol>
                        </div>

                        <div>
                            <p class="font-bold text-purple-700 mb-2">C. Ayo Selesaikan Tantangan Ini!</p>
                            <p class="text-sm mb-3">Berdasarkan pemahamanmu tentang materi <strong class="val-elemen"></strong>, kerjakan tugas di bawah ini!</p>
                            
                            <div class="border-2 border-gray-300 rounded-xl p-4 bg-white min-h-[200px]">
                                <p class="font-medium mb-8">1. Jelaskan pemahaman utamamu mengenai materi ini menggunakan bahasamu sendiri!</p>
                                <hr class="border-t-2 border-dashed border-gray-200 my-4">
                                <p class="font-medium mb-8">2. Berikan contoh penerapan nyata materi ini di sekolah atau lingkungan sekitarmu!</p>
                                <hr class="border-t-2 border-dashed border-gray-200 my-4">
                                <p class="font-medium">3. Apa kesimpulan atau nilai positif yang bisa kita ambil dari pembelajaran hari ini?</p>
                            </div>

                            <p class="text-right text-green-600 font-bold text-lg mt-6">"Semangat Belajar, Sukses Menanti!" üåü</p>
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <script src="js/firebase-config.js"></script>
    <script src="js/auth.js"></script>
    <script>
        let kurikulumData = {};
        let userSubscription = 'free';
        const namaBulanGanjil = ["Juli", "Agustus", "September", "Oktober", "November", "Desember"];
        const namaBulanGenap = ["Januari", "Februari", "Maret", "April", "Mei", "Juni"];

        // Initialize
        Auth.checkAuth(async (user) => {
            // Load user profile data
            const userData = await Auth.getCurrentUserData();
            if (userData && userData.profile) {
                const p = userData.profile;
                document.getElementById('inputSekolah').value = p.sekolah || '';
                document.getElementById('inputKepsek').value = p.namaKepsek || '';
                document.getElementById('inputNipKepsek').value = p.nipKepsek || '';
                document.getElementById('inputGuru').value = p.namaLengkap || '';
                document.getElementById('inputNipGuru').value = p.nip || '';
                document.getElementById('inputTempatTgl').value = (p.kotaKabupaten || '') + ', ........................ 2024';
                
                // Set mapel from profile if available
                if (p.mapelDiampu && p.mapelDiampu.length > 0) {
                    document.getElementById('inputMapel').value = p.mapelDiampu[0].nama;
                }
            }

            // Check subscription
            userSubscription = await Auth.checkSubscription();
            if (userSubscription === 'free') {
                document.querySelectorAll('.premium-only').forEach(el => {
                    el.style.opacity = '0.5';
                    el.style.pointerEvents = 'none';
                });
                document.querySelectorAll('.premium-doc').forEach(el => {
                    const checkbox = el.querySelector('input[type="checkbox"]');
                    if (checkbox) {
                        checkbox.checked = false;
                        checkbox.disabled = true;
                    }
                });
            }

            // Set default tahun
            const tahun = getTahunAjaran();
            document.getElementById('inputTahun').value = parseInt(tahun.current.split('/')[0]);

            setupEventListeners();
        });

        function setupEventListeners() {
            // CSV file upload
            document.getElementById('csvFile').addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        processCSV(e.target.result);
                    };
                    reader.readAsText(file);
                }
            });

            // Form input changes
            const inputs = ['inputMapel', 'inputKelas', 'inputRombel', 'inputSemester', 'inputElemen', 
                           'inputTahun', 'inputJp', 'inputHari', 'inputSekolah', 'inputTempatTgl', 
                           'inputKepsek', 'inputNipKepsek', 'inputGuru', 'inputNipGuru'];
            inputs.forEach(id => {
                document.getElementById(id).addEventListener('change', updateValues);
                document.getElementById(id).addEventListener('input', updateValues);
            });

            // Document checkboxes
            document.getElementById('checkAtp').addEventListener('change', toggleDocument);
            document.getElementById('checkProta').addEventListener('change', toggleDocument);
            document.getElementById('checkPromes').addEventListener('change', toggleDocument);
            document.getElementById('checkModul').addEventListener('change', toggleDocument);
            document.getElementById('checkKktp').addEventListener('change', toggleDocument);
            document.getElementById('checkLkpd').addEventListener('change', toggleDocument);
        }

        function processCSV(csvText) {
            const lines = csvText.split('\n');
            kurikulumData = {};
            let count = 0;

            for (let i = 1; i < lines.length; i++) {
                const row = lines[i].trim();
                if (!row) continue;

                const cols = row.split(';');
                if (cols.length < 7) continue;

                const kelas = cols[1].trim();
                const semester = cols[2].trim();
                const elemen = cols[3].trim();
                const cp = cols[4].trim();
                const tp = cols[5].trim();
                const dimensi = cols[6].trim();

                if (!kurikulumData[kelas]) kurikulumData[kelas] = {};
                if (!kurikulumData[kelas][semester]) kurikulumData[kelas][semester] = {};
                if (!kurikulumData[kelas][semester][elemen]) {
                    kurikulumData[kelas][semester][elemen] = { cp, tps: [] };
                }

                kurikulumData[kelas][semester][elemen].tps.push({ tp, dimensi });
                count++;
            }

            document.getElementById('csvStatus').textContent = `‚úÖ Berhasil memuat ${count} TP`;
            document.getElementById('csvStatus').classList.remove('hidden');

            updateElemenList();
            generateDocuments();
        }

        function updateElemenList() {
            const kelas = document.getElementById('inputKelas').value;
            const semester = document.getElementById('inputSemester').value;
            const select = document.getElementById('inputElemen');
            select.innerHTML = '';

            if (kurikulumData[kelas] && kurikulumData[kelas][semester]) {
                Object.keys(kurikulumData[kelas][semester]).forEach(el => {
                                        const opt = document.createElement('option');
                    opt.value = el;
                    opt.textContent = el;
                    select.appendChild(opt);
                });
            } else {
                select.innerHTML = '<option value="">-- Data tidak tersedia --</option>';
            }
        }

        function updateValues() {
            const kelas = document.getElementById('inputKelas').value;
            const kelasInt = parseInt(kelas);
            let fase = 'A';
            if (kelasInt <= 2) fase = 'A';
            else if (kelasInt <= 4) fase = 'B';
            else if (kelasInt <= 6) fase = 'C';
            else if (kelasInt <= 9) fase = 'D';
            else if (kelasInt === 10) fase = 'E';
            else fase = 'F';

            const tahunAwal = parseInt(document.getElementById('inputTahun').value) || 2024;
            const tahunAjaran = `${tahunAwal}/${tahunAwal + 1}`;

            // Update all value placeholders
            document.querySelectorAll('.val-mapel').forEach(el => el.textContent = document.getElementById('inputMapel').value);
            document.querySelectorAll('.val-sekolah').forEach(el => el.textContent = document.getElementById('inputSekolah').value);
            document.querySelectorAll('.val-kelas').forEach(el => el.textContent = kelas);
            document.querySelectorAll('.val-rombel').forEach(el => el.textContent = document.getElementById('inputRombel').value);
            document.querySelectorAll('.val-semester').forEach(el => el.textContent = document.getElementById('inputSemester').value);
            document.querySelectorAll('.val-tahun').forEach(el => el.textContent = tahunAjaran);
            document.querySelectorAll('.val-fase').forEach(el => el.textContent = 'Fase ' + fase);
            document.querySelectorAll('.val-elemen').forEach(el => el.textContent = document.getElementById('inputElemen').value || '...');
            document.querySelectorAll('.val-kepsek').forEach(el => el.textContent = document.getElementById('inputKepsek').value);
            document.querySelectorAll('.val-nipkepsek').forEach(el => el.textContent = document.getElementById('inputNipKepsek').value);
            document.querySelectorAll('.val-guru').forEach(el => el.textContent = document.getElementById('inputGuru').value);
            document.querySelectorAll('.val-nipguru').forEach(el => el.textContent = document.getElementById('inputNipGuru').value);
            document.querySelectorAll('.val-tempattgl').forEach(el => el.textContent = document.getElementById('inputTempatTgl').value);

            updateElemenList();
        }

        function toggleDocument() {
            document.getElementById('docAtp').style.display = document.getElementById('checkAtp').checked ? 'block' : 'none';
            document.getElementById('docProta').style.display = document.getElementById('checkProta').checked ? 'block' : 'none';
            document.getElementById('docPromes').style.display = document.getElementById('checkPromes').checked ? 'block' : 'none';
            document.getElementById('docModul').style.display = document.getElementById('checkModul').checked ? 'block' : 'none';
            document.getElementById('docKktp').style.display = document.getElementById('checkKktp').checked ? 'block' : 'none';
            document.getElementById('docLkpd').style.display = document.getElementById('checkLkpd').checked ? 'block' : 'none';
        }

        function generateDocuments() {
            updateValues();

            const kelas = document.getElementById('inputKelas').value;
            const semester = document.getElementById('inputSemester').value;
            const elemen = document.getElementById('inputElemen').value;
            const jpPerTp = parseInt(document.getElementById('inputJp').value) || 4;
            const hariTarget = parseInt(document.getElementById('inputHari').value);
            const tahunAwal = parseInt(document.getElementById('inputTahun').value) || 2024;

            // Get all bab data for this class and semester
            let allBab = [];
            if (kurikulumData[kelas] && kurikulumData[kelas][semester]) {
                for (let babName in kurikulumData[kelas][semester]) {
                    allBab.push({
                        bab: babName,
                        cp: kurikulumData[kelas][semester][babName].cp,
                        tps: kurikulumData[kelas][semester][babName].tps
                    });
                }
            }

            // Selected elemen data
            const selectedData = kurikulumData[kelas]?.[semester]?.[elemen];
            const selectedTPs = selectedData ? selectedData.tps : [];

            // Update JP for selected bab
            document.querySelectorAll('.val-jpbab').forEach(el => el.textContent = selectedTPs.length * jpPerTp);

            // Calculate teaching dates
            const teachingDates = calculateTeachingDates(semester, tahunAwal, hariTarget);

            // Generate ATP
            generateATP(allBab, jpPerTp);

            // Generate Prota
            generateProta(allBab, semester, jpPerTp);

            // Generate Promes
            if (userSubscription === 'premium' || Auth.isSuperAdmin(auth.currentUser?.email)) {
                generatePromes(allBab, semester, jpPerTp, tahunAwal, hariTarget, teachingDates);
            }

            // Generate Modul Ajar
            generateModulAjar(selectedTPs, jpPerTp);

            // Generate KKTP
            generateKKTP(allBab, semester);

            // Generate LKPD
            generateLKPD(selectedTPs);

            toggleDocument();
        }

        function calculateTeachingDates(semester, tahunAwal, hariTarget) {
            const dates = [];
            const startMonth = semester === 'Ganjil' ? 6 : 0; // July or January
            const year = semester === 'Ganjil' ? tahunAwal : tahunAwal + 1;

            for (let m = 0; m < 6; m++) {
                let currentMonth = startMonth + m;
                let currentYear = year;
                if (currentMonth > 11) {
                    currentMonth -= 12;
                    currentYear++;
                }

                const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
                for (let d = 1; d <= daysInMonth; d++) {
                    const date = new Date(currentYear, currentMonth, d);
                    if (date.getDay() === hariTarget) {
                        dates.push(date);
                    }
                }
            }

            return dates;
        }

        function generateATP(allBab, jpPerTp) {
            let html = '';
            if (allBab.length === 0) {
                html = '<tr><td colspan="8" class="border border-black p-4 text-center text-gray-500">Upload file CSV untuk generate dokumen</td></tr>';
            } else {
                allBab.forEach((babObj, iBab) => {
                    const totalJp = babObj.tps.length * jpPerTp;
                    const minggu = Math.ceil(totalJp / jpPerTp);

                    babObj.tps.forEach((tpObj, iTp) => {
                        const kompetensi = tpObj.tp.match(/mampu\s+([a-zA-Z\-]+)/i)?.[1] || 'Memahami';

                        html += '<tr>';
                        if (iTp === 0) {
                            html += `<td class="border border-black p-2 text-center" rowspan="${babObj.tps.length}">${iBab + 1}</td>`;
                            html += `<td class="border border-black p-2 text-left" rowspan="${babObj.tps.length}" contenteditable="true"><b>${babObj.bab}</b><br><br>${babObj.cp}</td>`;
                        }
                        html += `<td class="border border-black p-2 text-left" contenteditable="true">${iBab + 1}.${iTp + 1} ${tpObj.tp}</td>`;
                        html += `<td class="border border-black p-2 text-left" contenteditable="true">${tpObj.tp}</td>`;
                        html += `<td class="border border-black p-2 text-center text-blue-700 font-medium" contenteditable="true">${tpObj.dimensi}</td>`;
                        html += `<td class="border border-black p-2 text-center" contenteditable="true">${kompetensi.charAt(0).toUpperCase() + kompetensi.slice(1)}</td>`;
                        if (iTp === 0) {
                            html += `<td class="border border-black p-2 text-center" rowspan="${babObj.tps.length}" contenteditable="true">${babObj.bab}</td>`;
                            html += `<td class="border border-black p-2 text-center" rowspan="${babObj.tps.length}" contenteditable="true"><b>${minggu} Minggu<br>${totalJp} JP</b></td>`;
                        }
                        html += '</tr>';
                    });
                });
            }
            document.getElementById('bodyAtp').innerHTML = html;
        }

        function generateProta(allBab, semester, jpPerTp) {
            let html = '';
            if (allBab.length === 0) {
                html = '<tr><td colspan="4" class="border border-black p-4 text-center text-gray-500">Upload file CSV untuk generate dokumen</td></tr>';
            } else {
                allBab.forEach((babObj, iBab) => {
                    const totalJp = babObj.tps.length * jpPerTp;

                    babObj.tps.forEach((tpObj, iTp) => {
                        html += '<tr>';
                        if (iTp === 0) {
                            html += `<td class="border border-black p-2 text-center" rowspan="${babObj.tps.length}">${semester}</td>`;
                            html += `<td class="border border-black p-2 text-center bg-gray-50" rowspan="${babObj.tps.length}">
                                <div style="writing-mode: vertical-rl; transform: rotate(180deg); font-weight: bold;">${babObj.bab}</div>
                            </td>`;
                        }
                        html += `<td class="border border-black p-2 text-left" contenteditable="true">${tpObj.tp}</td>`;
                        if (iTp === 0) {
                            html += `<td class="border border-black p-2 text-center font-bold" rowspan="${babObj.tps.length}">${totalJp} JP</td>`;
                        }
                        html += '</tr>';
                    });
                });
            }
            document.getElementById('bodyProta').innerHTML = html;
        }

        function generatePromes(allBab, semester, jpPerTp, tahunAwal, hariTarget, teachingDates) {
            const namaBulan = semester === 'Ganjil' ? namaBulanGanjil : namaBulanGenap;

            // Generate header
            let headHtml = '<tr class="bg-gray-100">';
            headHtml += '<th class="border border-black p-2" rowspan="2">Bab</th>';
            headHtml += '<th class="border border-black p-2" rowspan="2">Tujuan Pembelajaran</th>';
            headHtml += '<th class="border border-black p-2" rowspan="2">JP</th>';
            namaBulan.forEach(b => {
                headHtml += `<th class="border border-black p-1" colspan="5">${b}</th>`;
            });
            headHtml += '</tr><tr class="bg-gray-100">';
            for (let i = 0; i < 6; i++) {
                for (let w = 1; w <= 5; w++) {
                    headHtml += `<th class="border border-black p-1 w-8">${w}</th>`;
                }
            }
            headHtml += '</tr>';
            document.getElementById('headPromes').innerHTML = headHtml;

            // Generate body with dates
            let bodyHtml = '';
            let dateIndex = 0;

            if (allBab.length === 0) {
                bodyHtml = '<tr><td colspan="33" class="border border-black p-4 text-center text-gray-500">Upload file CSV untuk generate dokumen</td></tr>';
            } else {
                const blnAwal = semester === 'Ganjil' ? 6 : 0;
                const totalRows = allBab.reduce((sum, b) => sum + b.tps.length, 0);

                // Define events for specific columns
                const colEvents = new Array(30).fill(null);
                if (semester === 'Ganjil') {
                    colEvents[0] = 'MPLS';
                    colEvents[1] = 'MPLS';
                    colEvents[13] = 'STS';
                    colEvents[25] = 'SAS';
                    colEvents[26] = 'REMEDIAL';
                    colEvents[27] = 'RAPOR';
                    colEvents[28] = 'LIBUR';
                    colEvents[29] = 'LIBUR';
                } else {
                    colEvents[0] = 'LIBUR';
                    colEvents[11] = 'STS';
                    colEvents[25] = 'PAT';
                    colEvents[26] = 'REMEDIAL';
                    colEvents[27] = 'RAPOR';
                    colEvents[28] = 'LIBUR';
                    colEvents[29] = 'LIBUR';
                }

                let rowIndex = 0;
                allBab.forEach((babObj, iBab) => {
                    babObj.tps.forEach((tpObj, iTp) => {
                        bodyHtml += '<tr>';
                        if (iTp === 0) {
                            bodyHtml += `<td class="border border-black p-1 bg-gray-50 text-center" rowspan="${babObj.tps.length}">
                                <div style="writing-mode: vertical-rl; transform: rotate(180deg); font-size: 9px; font-weight: bold;">${babObj.bab}</div>
                            </td>`;
                        }
                        bodyHtml += `<td class="border border-black p-1 text-left text-xs" contenteditable="true">${tpObj.tp}</td>`;
                        bodyHtml += `<td class="border border-black p-1 text-center">${jpPerTp}</td>`;

                        // Generate 30 week cells
                        for (let c = 0; c < 30; c++) {
                            if (colEvents[c] !== null) {
                                if (rowIndex === 0) {
                                    bodyHtml += `<td class="border border-black p-1 bg-yellow-50 text-center" rowspan="${totalRows}">
                                        <div style="writing-mode: vertical-rl; transform: rotate(180deg); font-size: 7px;">${colEvents[c]}</div>
                                    </td>`;
                                }
                            } else {
                                // Calculate if this cell should have JP
                                const mIdx = Math.floor(c / 5);
                                const wIdx = (c % 5) + 1;
                                
                                if (dateIndex < teachingDates.length) {
                                    const targetDate = teachingDates[dateIndex];
                                    const targetMonth = targetDate.getMonth();
                                    const targetWeek = Math.ceil(targetDate.getDate() / 7);
                                    
                                    let expectedMonth = blnAwal + mIdx;
                                    if (expectedMonth > 11) expectedMonth -= 12;

                                    if (targetMonth === expectedMonth && targetWeek === wIdx) {
                                        bodyHtml += `<td class="border border-black p-1 bg-blue-100 text-center" contenteditable="true">
                                            <span class="font-bold">${jpPerTp}</span><br>
                                            <span class="text-xs text-red-600">${targetDate.getDate()}</span>
                                        </td>`;
                                        dateIndex++;
                                    } else {
                                        bodyHtml += '<td class="border border-black p-1" contenteditable="true"></td>';
                                    }
                                } else {
                                    bodyHtml += '<td class="border border-black p-1" contenteditable="true"></td>';
                                }
                            }
                        }

                        bodyHtml += '</tr>';
                        rowIndex++;
                    });
                });
            }
            document.getElementById('bodyPromes').innerHTML = bodyHtml;
        }

        function generateModulAjar(tps, jpPerTp) {
            // Dimensi Profil Lulusan
            const dimensiSet = new Set();
            tps.forEach(tp => {
                tp.dimensi.split(',').forEach(d => dimensiSet.add(d.trim()));
            });
            let p3Html = '<ul class="list-disc pl-4">';
            dimensiSet.forEach(d => {
                p3Html += `<li><strong>${d}</strong></li>`;
            });
            p3Html += '</ul>';
            document.getElementById('modulP3').innerHTML = dimensiSet.size > 0 ? p3Html : '<p class="text-gray-500">Belum ada data.</p>';

            // Tujuan Pembelajaran
            let tpHtml = '<ul class="list-disc pl-4">';
            let langkahHtml = '';
            tps.forEach((tp, i) => {
                tpHtml += `<li><strong>Pertemuan ${i + 1}:</strong> ${tp.tp}</li>`;
                langkahHtml += `
                    <div class="mb-4 p-3 bg-gray-50 rounded">
                        <div class="font-bold text-purple-700 mb-2">Pertemuan ${i + 1} (${jpPerTp} JP)</div>
                        <ul class="list-disc pl-6 text-sm">
                            <li><strong>Pendahuluan (Mindful):</strong> Salam, doa, mengondisikan kelas, pertanyaan pemantik.</li>
                            <li><strong>Kegiatan Inti (Meaningful & Joyful):</strong>
                                <ul class="list-disc pl-4">
                                    <li>Eksplorasi: Siswa mengamati dan mencari informasi.</li>
                                    <li>Kolaborasi: Diskusi kelompok dan pengerjaan LKPD.</li>
                                    <li>Komunikasi: Presentasi hasil kerja.</li>
                                </ul>
                            </li>
                            <li><strong>Penutup:</strong> Penguatan materi, refleksi, doa penutup.</li>
                        </ul>
                    </div>
                `;
            });
            tpHtml += '</ul>';
            document.getElementById('modulTP').innerHTML = tps.length > 0 ? tpHtml : '<p class="text-gray-500">Belum ada data.</p>';
            document.getElementById('modulLangkah').innerHTML = tps.length > 0 ? langkahHtml : '<p class="text-gray-500">Belum ada data.</p>';
        }

        function generateKKTP(allBab, semester) {
            let html = '';
            if (allBab.length === 0) {
                html = '<tr><td colspan="8" class="border border-black p-4 text-center text-gray-500">Upload file CSV untuk generate dokumen</td></tr>';
            } else {
                allBab.forEach((babObj, iBab) => {
                    babObj.tps.forEach((tpObj, iTp) => {
                        html += '<tr>';
                        if (iTp === 0) {
                            html += `<td class="border border-black p-2 text-center" rowspan="${babObj.tps.length}">${iBab + 1}</td>`;
                            html += `<td class="border border-black p-2 text-center" rowspan="${babObj.tps.length}">${semester}</td>`;
                            html += `<td class="border border-black p-1 bg-gray-50 text-center" rowspan="${babObj.tps.length}">
                                <div style="writing-mode: vertical-rl; transform: rotate(180deg); font-size: 9px; font-weight: bold;">${babObj.bab}</div>
                            </td>`;
                        }
                        html += `<td class="border border-black p-2 text-left" contenteditable="true">${tpObj.tp}</td>`;
                        html += `<td class="border border-black p-2 text-center bg-yellow-50 font-bold text-blue-700" contenteditable="true" oninput="calcKKTP(this)">75</td>`;
                        html += `<td class="border border-black p-2 text-center bg-yellow-50 font-bold text-blue-700" contenteditable="true" oninput="calcKKTP(this)">75</td>`;
                        html += `<td class="border border-black p-2 text-center bg-yellow-50 font-bold text-blue-700" contenteditable="true" oninput="calcKKTP(this)">75</td>`;
                        html += `<td class="border border-black p-2 text-center bg-blue-100 font-bold">75</td>`;
                        html += '</tr>';
                    });
                });
            }
            document.getElementById('bodyKktp').innerHTML = html;
        }

        function calcKKTP(el) {
            const row = el.closest('tr');
            const inputs = row.querySelectorAll('td[contenteditable="true"]');
            const vals = [];
            inputs.forEach((td, i) => {
                if (i >= inputs.length - 3 && i < inputs.length) {
                    vals.push(parseFloat(td.textContent) || 0);
                }
            });
            // Actually we need to get the 3 KKTP inputs specifically
            const kktpInputs = Array.from(row.querySelectorAll('td.bg-yellow-50'));
            const v1 = parseFloat(kktpInputs[0]?.textContent) || 0;
            const v2 = parseFloat(kktpInputs[1]?.textContent) || 0;
            const v3 = parseFloat(kktpInputs[2]?.textContent) || 0;
            const result = Math.round((v1 + v2 + v3) / 3);
            const resultTd = row.querySelector('td.bg-blue-100');
            if (resultTd) resultTd.textContent = result;
        }

        function generateLKPD(tps) {
            let html = '';
            tps.forEach(tp => {
                html += `<li>${tp.tp}</li>`;
            });
            document.getElementById('lkpdTP').innerHTML = html || '<li>Tujuan Pembelajaran akan muncul di sini</li>';
        }

        // Initial update
        updateValues();
    </script>
</body>
</html>